parameters:
  - name: azureSubscription
    displayName: Azure Subscription
    type: string

  - name: botGroup
    displayName: Bot Group
    type: string

  - name: botName
    displayName: Bot Name
    type: string

  - name: resourceSuffix
    displayName: Resource Suffix
    type: string

steps:
- task: AzureCLI@2
  displayName: "Create DirectLine Channel"
  inputs:
    azureSubscription: "${{ parameters.azureSubscription }}"
    scriptType: pscore
    scriptLocation: inlineScript
    inlineScript: |
      az bot directline create -n "${{ parameters.botName }}${{ parameters.resourceSuffix }}-$(Build.BuildId)" -g "${{ parameters.botGroup }}"
